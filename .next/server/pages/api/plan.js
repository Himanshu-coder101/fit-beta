"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/plan";
exports.ids = ["pages/api/plan"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fplan&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cplan.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fplan&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cplan.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_plan_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\plan.js */ \"(api)/./pages/api/plan.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_plan_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_plan_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/plan\",\n        pathname: \"/api/plan\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_plan_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnBsYW4mcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q3BsYW4uanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDa0Q7QUFDbEQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLCtDQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywrQ0FBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9maXR0cmFjay1wcm8vPzVkZmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxwbGFuLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcGxhblwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3BsYW5cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fplan&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cplan.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/aiExerciseSelector.js":
/*!***********************************!*\
  !*** ./lib/aiExerciseSelector.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EXERCISES: () => (/* binding */ EXERCISES),\n/* harmony export */   createPlan: () => (/* binding */ createPlan),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getAlternatives: () => (/* binding */ getAlternatives)\n/* harmony export */ });\n// lib/aiExerciseSelector.js\n// Hybrid local \"AI\" exercise selector + same-session alternatives engine\nfunction randSeeded(seed) {\n    let t = seed >>> 0;\n    return function() {\n        t += 0x6D2B79F5;\n        let r = Math.imul(t ^ t >>> 15, 1 | t);\n        r ^= r + Math.imul(r ^ r >>> 7, 61 | r);\n        return ((r ^ r >>> 14) >>> 0) / 4294967296;\n    };\n}\n/* -------------------------------------\r\n   EXERCISE DATABASE (expand anytime)\r\n   ------------------------------------- */ const EXERCISES = [\n    // Barbell\n    {\n        id: \"back_squat\",\n        name: \"Back Squat\",\n        primary: \"quads\",\n        movement: \"squat\",\n        equipment: [\n            \"barbell\"\n        ],\n        goals: {\n            strength: 0.95,\n            hypertrophy: 0.85,\n            fat: 0.5,\n            endurance: 0.2\n        },\n        experience: \"intermediate\"\n    },\n    {\n        id: \"deadlift\",\n        name: \"Deadlift\",\n        primary: \"posterior_chain\",\n        movement: \"hinge\",\n        equipment: [\n            \"barbell\"\n        ],\n        goals: {\n            strength: 0.98,\n            hypertrophy: 0.8\n        },\n        experience: \"intermediate\"\n    },\n    {\n        id: \"bench_press\",\n        name: \"Barbell Bench Press\",\n        primary: \"chest\",\n        movement: \"press\",\n        equipment: [\n            \"barbell\"\n        ],\n        goals: {\n            strength: 0.96,\n            hypertrophy: 0.9\n        },\n        experience: \"beginner\"\n    },\n    {\n        id: \"barbell_row\",\n        name: \"Barbell Row\",\n        primary: \"back\",\n        movement: \"row\",\n        equipment: [\n            \"barbell\"\n        ],\n        goals: {\n            strength: 0.9,\n            hypertrophy: 0.8\n        },\n        experience: \"beginner\"\n    },\n    // Dumbbell\n    {\n        id: \"db_flat_press\",\n        name: \"Dumbbell Flat Press\",\n        primary: \"chest\",\n        movement: \"press\",\n        equipment: [\n            \"dumbbell\"\n        ],\n        goals: {\n            hypertrophy: 0.95\n        },\n        experience: \"beginner\"\n    },\n    {\n        id: \"db_incline_press\",\n        name: \"Dumbbell Incline Press\",\n        primary: \"upper_chest\",\n        movement: \"press\",\n        equipment: [\n            \"dumbbell\"\n        ],\n        goals: {\n            hypertrophy: 0.95\n        },\n        experience: \"beginner\"\n    },\n    {\n        id: \"db_row\",\n        name: \"Dumbbell Row\",\n        primary: \"back\",\n        movement: \"row\",\n        equipment: [\n            \"dumbbell\"\n        ],\n        goals: {\n            hypertrophy: 0.9\n        },\n        experience: \"beginner\"\n    },\n    {\n        id: \"goblet_squat\",\n        name: \"Goblet Squat\",\n        primary: \"quads\",\n        movement: \"squat\",\n        equipment: [\n            \"dumbbell\"\n        ],\n        goals: {\n            hypertrophy: 0.8,\n            fat: 0.6\n        },\n        experience: \"beginner\"\n    },\n    // Bodyweight\n    {\n        id: \"pushups\",\n        name: \"Push-ups\",\n        primary: \"chest\",\n        movement: \"press\",\n        equipment: [\n            \"bodyweight\"\n        ],\n        goals: {\n            endurance: 0.8,\n            hypertrophy: 0.6\n        },\n        experience: \"beginner\"\n    },\n    {\n        id: \"inverted_row\",\n        name: \"Inverted Row\",\n        primary: \"back\",\n        movement: \"row\",\n        equipment: [\n            \"bodyweight\"\n        ],\n        goals: {\n            hypertrophy: 0.7,\n            endurance: 0.6\n        },\n        experience: \"beginner\"\n    },\n    {\n        id: \"bw_squat\",\n        name: \"Bodyweight Squat\",\n        primary: \"quads\",\n        movement: \"squat\",\n        equipment: [\n            \"bodyweight\"\n        ],\n        goals: {\n            endurance: 0.8,\n            fat: 0.7\n        },\n        experience: \"beginner\"\n    },\n    {\n        id: \"walking_lunge\",\n        name: \"Walking Lunge\",\n        primary: \"glutes\",\n        movement: \"lunge\",\n        equipment: [\n            \"bodyweight\"\n        ],\n        goals: {\n            hypertrophy: 0.6\n        },\n        experience: \"beginner\"\n    },\n    // Accessories\n    {\n        id: \"lateral_raise\",\n        name: \"Lateral Raise\",\n        primary: \"shoulders\",\n        movement: \"isolation\",\n        equipment: [\n            \"dumbbell\"\n        ],\n        goals: {\n            hypertrophy: 0.95\n        },\n        experience: \"beginner\"\n    },\n    {\n        id: \"biceps_curl\",\n        name: \"Dumbbell Curl\",\n        primary: \"biceps\",\n        movement: \"isolation\",\n        equipment: [\n            \"dumbbell\"\n        ],\n        goals: {\n            hypertrophy: 0.9\n        },\n        experience: \"beginner\"\n    },\n    {\n        id: \"triceps_ext\",\n        name: \"Triceps Extension\",\n        primary: \"triceps\",\n        movement: \"isolation\",\n        equipment: [\n            \"dumbbell\"\n        ],\n        goals: {\n            hypertrophy: 0.9\n        },\n        experience: \"beginner\"\n    },\n    // Cardio\n    {\n        id: \"bike_intervals\",\n        name: \"Bike Intervals\",\n        primary: \"cardio\",\n        movement: \"cardio\",\n        equipment: [\n            \"bike\"\n        ],\n        goals: {\n            endurance: 0.98,\n            fat: 0.9\n        },\n        experience: \"beginner\"\n    }\n];\n/* -------------------------------------\r\n   UTILITIES\r\n   ------------------------------------- */ function filterByEquipment(exList, flags) {\n    const eqSet = new Set(flags || []);\n    return exList.filter((ex)=>ex.equipment.some((e)=>eqSet.has(e)));\n}\nfunction pickWeighted(rand, arr, scoreFn, count) {\n    const out = [];\n    let pool = [\n        ...arr\n    ];\n    while(out.length < count && pool.length){\n        const scores = pool.map((x)=>Math.max(0, scoreFn(x)));\n        const total = scores.reduce((a, b)=>a + b, 0) || 1;\n        const r = rand();\n        let idx = 0, acc = 0;\n        for(let i = 0; i < scores.length; i++){\n            acc += scores[i] / total;\n            if (r <= acc) {\n                idx = i;\n                break;\n            }\n        }\n        out.push(pool[idx]);\n        pool.splice(idx, 1);\n    }\n    return out;\n}\n/* -------------------------------------\r\n   Session builder\r\n   ------------------------------------- */ function scoreForProfile(ex, profile) {\n    const g = (profile.goal || \"\").toLowerCase();\n    if (g.includes(\"strength\")) return ex.goals.strength || 0.3;\n    if (g.includes(\"muscle\") || g.includes(\"hypertrophy\")) return ex.goals.hypertrophy || 0.3;\n    if (g.includes(\"fat\") || g.includes(\"loss\")) return ex.goals.fat || 0.2;\n    if (g.includes(\"endurance\")) return ex.goals.endurance || 0.2;\n    return ex.goals.hypertrophy || 0.3;\n}\nfunction buildSession(profile, pool, sessionType, time, rand) {\n    const targetCount = time < 35 ? 3 : time < 45 ? 4 : 5;\n    const typeMap = {\n        push: [\n            \"press\",\n            \"chest\",\n            \"shoulders\",\n            \"triceps\"\n        ],\n        pull: [\n            \"row\",\n            \"pull\",\n            \"back\",\n            \"biceps\"\n        ],\n        legs: [\n            \"squat\",\n            \"hinge\",\n            \"lunge\",\n            \"quads\",\n            \"glutes\",\n            \"hamstrings\"\n        ],\n        full: [\n            \"squat\",\n            \"hinge\",\n            \"press\",\n            \"row\",\n            \"isolation\",\n            \"cardio\"\n        ]\n    };\n    const keys = typeMap[sessionType.toLowerCase()] || typeMap.full;\n    const candidates = pool.filter((ex)=>keys.some((k)=>ex.movement.includes(k) || ex.primary.includes(k)));\n    const picked = pickWeighted(rand, candidates, (ex)=>scoreForProfile(ex, profile) * (0.85 + rand() * 0.3), targetCount);\n    return picked.map((ex)=>({\n            id: ex.id,\n            name: ex.name,\n            equipment: ex.equipment,\n            primary: ex.primary,\n            movement: ex.movement,\n            sets: 3,\n            reps: 8 + Math.floor(rand() * 4),\n            intensity_pct: 65 + Math.floor(rand() * 10),\n            rest_sec: 75,\n            rir: 1,\n            notes: \"\"\n        }));\n}\n/* -------------------------------------\r\n   MAIN PLAN CREATOR\r\n   ------------------------------------- */ function createPlan(profile = {}, opts = {}) {\n    const days = Number(profile.daysPerWeek) || 3;\n    const time = Number(profile.timePerSession) || 40;\n    const seed = profile.seed || Math.floor(Math.random() * 1e9);\n    const rand = randSeeded(seed);\n    // equipment normalization\n    const eq = new Set(profile.equipment || [\n        \"bodyweight\"\n    ]);\n    const eqFlags = [];\n    if (eq.has(\"barbell\") || eq.has(\"machine\") || eq.has(\"gym\")) eqFlags.push(\"barbell\", \"machine\");\n    if (eq.has(\"dumbbell\") || eq.has(\"bands\") || eq.has(\"home\")) eqFlags.push(\"dumbbell\");\n    if (eq.has(\"bodyweight\")) eqFlags.push(\"bodyweight\");\n    const pool = filterByEquipment(EXERCISES, eqFlags);\n    const split = profile.experience === \"beginner\" ? Array(days).fill(\"Full\") : days === 3 ? [\n        \"Push\",\n        \"Pull\",\n        \"Legs\"\n    ] : Array(days).fill(\"Full\");\n    const sessions = split.map((type, idx)=>({\n            day: `Day ${idx + 1} - ${type}`,\n            sessionType: type,\n            exercises: buildSession(profile, pool, type, time, rand)\n        }));\n    return {\n        generatedAt: new Date().toISOString(),\n        profile: {\n            ...profile,\n            seed\n        },\n        sessions,\n        meta: {\n            seed\n        }\n    };\n}\n/* -------------------------------------\r\n   NEW: SAME-SESSION ALTERNATIVES\r\n   ------------------------------------- */ function getAlternatives(baseExerciseName, pool = \"gym\", count = 5, profile = {}) {\n    if (!baseExerciseName) return [];\n    // 1. locate base exercise (case-insensitive)\n    let base = EXERCISES.find((ex)=>ex.name.toLowerCase() === baseExerciseName.toLowerCase() || ex.id.toLowerCase() === baseExerciseName.toLowerCase());\n    // fallback partial match\n    if (!base) {\n        const token = baseExerciseName.split(\" \")[0].toLowerCase();\n        const fallback = EXERCISES.find((ex)=>ex.name.toLowerCase().includes(token));\n        if (fallback) base = fallback;\n    }\n    if (!base) return [];\n    // 2. equipment pool → allowed equipment\n    const poolMap = {\n        gym: [\n            \"barbell\",\n            \"machine\"\n        ],\n        dumbbell: [\n            \"dumbbell\"\n        ],\n        body: [\n            \"bodyweight\"\n        ]\n    };\n    const allowed = poolMap[pool] || [\n        \"barbell\",\n        \"dumbbell\",\n        \"bodyweight\"\n    ];\n    // 3. filter by: same movement OR same primary muscle\n    const candidates = EXERCISES.filter((ex)=>{\n        if (ex.id === base.id) return false;\n        if (!ex.equipment.some((e)=>allowed.includes(e))) return false;\n        const sameMove = ex.movement === base.movement;\n        const samePrim = ex.primary === base.primary;\n        return sameMove || samePrim || ex.movement === \"isolation\";\n    });\n    // 4. scoring for picking\n    const rand = randSeeded(profile.seed || Math.floor(Math.random() * 1e9));\n    const scoreFn = (ex)=>{\n        let s = 0;\n        if (ex.movement === base.movement) s += 2.0;\n        if (ex.primary === base.primary) s += 1.2;\n        s += scoreForProfile(ex, profile);\n        return s * (0.85 + rand() * 0.3);\n    };\n    // pick weighted top-N\n    const picked = pickWeighted(rand, candidates, scoreFn, count);\n    // 5. return UI-ready objects\n    return picked.map((p)=>({\n            id: p.id,\n            name: p.name,\n            equipment: p.equipment,\n            primary: p.primary,\n            movement: p.movement,\n            notes: \"\"\n        }));\n}\n/* default export */ /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    createPlan,\n    getAlternatives\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVqRyxTQUFTO1lBQ3RCRixTQUFTbUcsRUFBRW5HLE9BQU87WUFDbEJDLFVBQVVrRyxFQUFFbEcsUUFBUTtZQUNwQitELE9BQU87UUFDVDtBQUNGO0FBRUEsa0JBQWtCLEdBQ2xCLGlFQUFlO0lBQUVDO0lBQVlvQjtBQUFnQixDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9maXR0cmFjay1wcm8vLi9saWIvYWlFeGVyY2lzZVNlbGVjdG9yLmpzPzNlODQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL2FpRXhlcmNpc2VTZWxlY3Rvci5qc1xyXG4vLyBIeWJyaWQgbG9jYWwgXCJBSVwiIGV4ZXJjaXNlIHNlbGVjdG9yICsgc2FtZS1zZXNzaW9uIGFsdGVybmF0aXZlcyBlbmdpbmVcclxuXHJcbmZ1bmN0aW9uIHJhbmRTZWVkZWQoc2VlZCkge1xyXG4gIGxldCB0ID0gc2VlZCA+Pj4gMDtcclxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgdCArPSAweDZEMkI3OUY1O1xyXG4gICAgbGV0IHIgPSBNYXRoLmltdWwodCBeICh0ID4+PiAxNSksIDEgfCB0KTtcclxuICAgIHIgXj0gciArIE1hdGguaW11bChyIF4gKHIgPj4+IDcpLCA2MSB8IHIpO1xyXG4gICAgcmV0dXJuICgociBeIChyID4+PiAxNCkpID4+PiAwKSAvIDQyOTQ5NjcyOTY7XHJcbiAgfTtcclxufVxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICBFWEVSQ0lTRSBEQVRBQkFTRSAoZXhwYW5kIGFueXRpbWUpXHJcbiAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuZXhwb3J0IGNvbnN0IEVYRVJDSVNFUyA9IFtcclxuICAvLyBCYXJiZWxsXHJcbiAgeyBpZDogJ2JhY2tfc3F1YXQnLCBuYW1lOiAnQmFjayBTcXVhdCcsIHByaW1hcnk6ICdxdWFkcycsIG1vdmVtZW50OiAnc3F1YXQnLCBlcXVpcG1lbnQ6IFsnYmFyYmVsbCddLCBnb2Fsczoge3N0cmVuZ3RoOjAuOTUsIGh5cGVydHJvcGh5OjAuODUsIGZhdDowLjUsIGVuZHVyYW5jZTowLjJ9LCBleHBlcmllbmNlOiAnaW50ZXJtZWRpYXRlJyB9LFxyXG4gIHsgaWQ6ICdkZWFkbGlmdCcsIG5hbWU6ICdEZWFkbGlmdCcsIHByaW1hcnk6ICdwb3N0ZXJpb3JfY2hhaW4nLCBtb3ZlbWVudDogJ2hpbmdlJywgZXF1aXBtZW50OiBbJ2JhcmJlbGwnXSwgZ29hbHM6IHtzdHJlbmd0aDowLjk4LCBoeXBlcnRyb3BoeTowLjh9LCBleHBlcmllbmNlOiAnaW50ZXJtZWRpYXRlJyB9LFxyXG4gIHsgaWQ6ICdiZW5jaF9wcmVzcycsIG5hbWU6ICdCYXJiZWxsIEJlbmNoIFByZXNzJywgcHJpbWFyeTogJ2NoZXN0JywgbW92ZW1lbnQ6ICdwcmVzcycsIGVxdWlwbWVudDogWydiYXJiZWxsJ10sIGdvYWxzOiB7c3RyZW5ndGg6MC45NiwgaHlwZXJ0cm9waHk6MC45fSwgZXhwZXJpZW5jZTogJ2JlZ2lubmVyJyB9LFxyXG4gIHsgaWQ6ICdiYXJiZWxsX3JvdycsIG5hbWU6ICdCYXJiZWxsIFJvdycsIHByaW1hcnk6ICdiYWNrJywgbW92ZW1lbnQ6ICdyb3cnLCBlcXVpcG1lbnQ6IFsnYmFyYmVsbCddLCBnb2Fsczoge3N0cmVuZ3RoOjAuOSwgaHlwZXJ0cm9waHk6MC44fSwgZXhwZXJpZW5jZTogJ2JlZ2lubmVyJyB9LFxyXG5cclxuICAvLyBEdW1iYmVsbFxyXG4gIHsgaWQ6ICdkYl9mbGF0X3ByZXNzJywgbmFtZTogJ0R1bWJiZWxsIEZsYXQgUHJlc3MnLCBwcmltYXJ5OiAnY2hlc3QnLCBtb3ZlbWVudDogJ3ByZXNzJywgZXF1aXBtZW50OiBbJ2R1bWJiZWxsJ10sIGdvYWxzOiB7aHlwZXJ0cm9waHk6MC45NX0sIGV4cGVyaWVuY2U6ICdiZWdpbm5lcicgfSxcclxuICB7IGlkOiAnZGJfaW5jbGluZV9wcmVzcycsIG5hbWU6ICdEdW1iYmVsbCBJbmNsaW5lIFByZXNzJywgcHJpbWFyeTogJ3VwcGVyX2NoZXN0JywgbW92ZW1lbnQ6ICdwcmVzcycsIGVxdWlwbWVudDogWydkdW1iYmVsbCddLCBnb2Fsczoge2h5cGVydHJvcGh5OjAuOTV9LCBleHBlcmllbmNlOiAnYmVnaW5uZXInIH0sXHJcbiAgeyBpZDogJ2RiX3JvdycsIG5hbWU6ICdEdW1iYmVsbCBSb3cnLCBwcmltYXJ5OiAnYmFjaycsIG1vdmVtZW50OiAncm93JywgZXF1aXBtZW50OiBbJ2R1bWJiZWxsJ10sIGdvYWxzOiB7aHlwZXJ0cm9waHk6MC45fSwgZXhwZXJpZW5jZTogJ2JlZ2lubmVyJyB9LFxyXG4gIHsgaWQ6ICdnb2JsZXRfc3F1YXQnLCBuYW1lOiAnR29ibGV0IFNxdWF0JywgcHJpbWFyeTogJ3F1YWRzJywgbW92ZW1lbnQ6ICdzcXVhdCcsIGVxdWlwbWVudDogWydkdW1iYmVsbCddLCBnb2Fsczoge2h5cGVydHJvcGh5OjAuOCwgZmF0OjAuNn0sIGV4cGVyaWVuY2U6ICdiZWdpbm5lcicgfSxcclxuXHJcbiAgLy8gQm9keXdlaWdodFxyXG4gIHsgaWQ6ICdwdXNodXBzJywgbmFtZTogJ1B1c2gtdXBzJywgcHJpbWFyeTogJ2NoZXN0JywgbW92ZW1lbnQ6ICdwcmVzcycsIGVxdWlwbWVudDogWydib2R5d2VpZ2h0J10sIGdvYWxzOiB7ZW5kdXJhbmNlOjAuOCwgaHlwZXJ0cm9waHk6MC42fSwgZXhwZXJpZW5jZTogJ2JlZ2lubmVyJyB9LFxyXG4gIHsgaWQ6ICdpbnZlcnRlZF9yb3cnLCBuYW1lOiAnSW52ZXJ0ZWQgUm93JywgcHJpbWFyeTogJ2JhY2snLCBtb3ZlbWVudDogJ3JvdycsIGVxdWlwbWVudDogWydib2R5d2VpZ2h0J10sIGdvYWxzOiB7aHlwZXJ0cm9waHk6MC43LCBlbmR1cmFuY2U6MC42fSwgZXhwZXJpZW5jZTogJ2JlZ2lubmVyJyB9LFxyXG4gIHsgaWQ6ICdid19zcXVhdCcsIG5hbWU6ICdCb2R5d2VpZ2h0IFNxdWF0JywgcHJpbWFyeTogJ3F1YWRzJywgbW92ZW1lbnQ6ICdzcXVhdCcsIGVxdWlwbWVudDogWydib2R5d2VpZ2h0J10sIGdvYWxzOiB7ZW5kdXJhbmNlOjAuOCwgZmF0OjAuN30sIGV4cGVyaWVuY2U6ICdiZWdpbm5lcicgfSxcclxuICB7IGlkOiAnd2Fsa2luZ19sdW5nZScsIG5hbWU6ICdXYWxraW5nIEx1bmdlJywgcHJpbWFyeTogJ2dsdXRlcycsIG1vdmVtZW50OiAnbHVuZ2UnLCBlcXVpcG1lbnQ6IFsnYm9keXdlaWdodCddLCBnb2Fsczoge2h5cGVydHJvcGh5OjAuNn0sIGV4cGVyaWVuY2U6ICdiZWdpbm5lcicgfSxcclxuXHJcbiAgLy8gQWNjZXNzb3JpZXNcclxuICB7IGlkOiAnbGF0ZXJhbF9yYWlzZScsIG5hbWU6ICdMYXRlcmFsIFJhaXNlJywgcHJpbWFyeTogJ3Nob3VsZGVycycsIG1vdmVtZW50OiAnaXNvbGF0aW9uJywgZXF1aXBtZW50OiBbJ2R1bWJiZWxsJ10sIGdvYWxzOiB7aHlwZXJ0cm9waHk6MC45NX0sIGV4cGVyaWVuY2U6ICdiZWdpbm5lcicgfSxcclxuICB7IGlkOiAnYmljZXBzX2N1cmwnLCBuYW1lOiAnRHVtYmJlbGwgQ3VybCcsIHByaW1hcnk6ICdiaWNlcHMnLCBtb3ZlbWVudDogJ2lzb2xhdGlvbicsIGVxdWlwbWVudDogWydkdW1iYmVsbCddLCBnb2Fsczoge2h5cGVydHJvcGh5OjAuOX0sIGV4cGVyaWVuY2U6ICdiZWdpbm5lcicgfSxcclxuICB7IGlkOiAndHJpY2Vwc19leHQnLCBuYW1lOiAnVHJpY2VwcyBFeHRlbnNpb24nLCBwcmltYXJ5OiAndHJpY2VwcycsIG1vdmVtZW50OiAnaXNvbGF0aW9uJywgZXF1aXBtZW50OiBbJ2R1bWJiZWxsJ10sIGdvYWxzOiB7aHlwZXJ0cm9waHk6MC45fSwgZXhwZXJpZW5jZTogJ2JlZ2lubmVyJyB9LFxyXG5cclxuICAvLyBDYXJkaW9cclxuICB7IGlkOiAnYmlrZV9pbnRlcnZhbHMnLCBuYW1lOiAnQmlrZSBJbnRlcnZhbHMnLCBwcmltYXJ5OiAnY2FyZGlvJywgbW92ZW1lbnQ6ICdjYXJkaW8nLCBlcXVpcG1lbnQ6IFsnYmlrZSddLCBnb2Fsczoge2VuZHVyYW5jZTowLjk4LCBmYXQ6MC45fSwgZXhwZXJpZW5jZTogJ2JlZ2lubmVyJyB9LFxyXG5dO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICBVVElMSVRJRVNcclxuICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5mdW5jdGlvbiBmaWx0ZXJCeUVxdWlwbWVudChleExpc3QsIGZsYWdzKSB7XHJcbiAgY29uc3QgZXFTZXQgPSBuZXcgU2V0KGZsYWdzIHx8IFtdKTtcclxuICByZXR1cm4gZXhMaXN0LmZpbHRlcihleCA9PiBleC5lcXVpcG1lbnQuc29tZShlID0+IGVxU2V0LmhhcyhlKSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwaWNrV2VpZ2h0ZWQocmFuZCwgYXJyLCBzY29yZUZuLCBjb3VudCkge1xyXG4gIGNvbnN0IG91dCA9IFtdO1xyXG4gIGxldCBwb29sID0gWy4uLmFycl07XHJcbiAgd2hpbGUgKG91dC5sZW5ndGggPCBjb3VudCAmJiBwb29sLmxlbmd0aCkge1xyXG4gICAgY29uc3Qgc2NvcmVzID0gcG9vbC5tYXAoeCA9PiBNYXRoLm1heCgwLCBzY29yZUZuKHgpKSk7XHJcbiAgICBjb25zdCB0b3RhbCA9IHNjb3Jlcy5yZWR1Y2UoKGEsYik9PmErYiwwKSB8fCAxO1xyXG4gICAgY29uc3QgciA9IHJhbmQoKTtcclxuICAgIGxldCBpZHggPSAwLCBhY2MgPSAwO1xyXG4gICAgZm9yIChsZXQgaT0wO2k8c2NvcmVzLmxlbmd0aDtpKyspIHtcclxuICAgICAgYWNjICs9IHNjb3Jlc1tpXSAvIHRvdGFsO1xyXG4gICAgICBpZiAociA8PSBhY2MpIHsgaWR4ID0gaTsgYnJlYWs7IH1cclxuICAgIH1cclxuICAgIG91dC5wdXNoKHBvb2xbaWR4XSk7XHJcbiAgICBwb29sLnNwbGljZShpZHgsMSk7XHJcbiAgfVxyXG4gIHJldHVybiBvdXQ7XHJcbn1cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgU2Vzc2lvbiBidWlsZGVyXHJcbiAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuZnVuY3Rpb24gc2NvcmVGb3JQcm9maWxlKGV4LCBwcm9maWxlKSB7XHJcbiAgY29uc3QgZyA9IChwcm9maWxlLmdvYWwgfHwgJycpLnRvTG93ZXJDYXNlKCk7XHJcbiAgaWYgKGcuaW5jbHVkZXMoJ3N0cmVuZ3RoJykpIHJldHVybiBleC5nb2Fscy5zdHJlbmd0aCB8fCAwLjM7XHJcbiAgaWYgKGcuaW5jbHVkZXMoJ211c2NsZScpIHx8IGcuaW5jbHVkZXMoJ2h5cGVydHJvcGh5JykpIHJldHVybiBleC5nb2Fscy5oeXBlcnRyb3BoeSB8fCAwLjM7XHJcbiAgaWYgKGcuaW5jbHVkZXMoJ2ZhdCcpIHx8IGcuaW5jbHVkZXMoJ2xvc3MnKSkgcmV0dXJuIGV4LmdvYWxzLmZhdCB8fCAwLjI7XHJcbiAgaWYgKGcuaW5jbHVkZXMoJ2VuZHVyYW5jZScpKSByZXR1cm4gZXguZ29hbHMuZW5kdXJhbmNlIHx8IDAuMjtcclxuICByZXR1cm4gZXguZ29hbHMuaHlwZXJ0cm9waHkgfHwgMC4zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBidWlsZFNlc3Npb24ocHJvZmlsZSwgcG9vbCwgc2Vzc2lvblR5cGUsIHRpbWUsIHJhbmQpIHtcclxuICBjb25zdCB0YXJnZXRDb3VudCA9IHRpbWUgPCAzNSA/IDMgOiB0aW1lIDwgNDUgPyA0IDogNTtcclxuXHJcbiAgY29uc3QgdHlwZU1hcCA9IHtcclxuICAgIHB1c2g6IFsncHJlc3MnLCdjaGVzdCcsJ3Nob3VsZGVycycsJ3RyaWNlcHMnXSxcclxuICAgIHB1bGw6IFsncm93JywncHVsbCcsJ2JhY2snLCdiaWNlcHMnXSxcclxuICAgIGxlZ3M6IFsnc3F1YXQnLCdoaW5nZScsJ2x1bmdlJywncXVhZHMnLCdnbHV0ZXMnLCdoYW1zdHJpbmdzJ10sXHJcbiAgICBmdWxsOiBbJ3NxdWF0JywnaGluZ2UnLCdwcmVzcycsJ3JvdycsJ2lzb2xhdGlvbicsJ2NhcmRpbyddLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGtleXMgPSB0eXBlTWFwW3Nlc3Npb25UeXBlLnRvTG93ZXJDYXNlKCldIHx8IHR5cGVNYXAuZnVsbDtcclxuXHJcbiAgY29uc3QgY2FuZGlkYXRlcyA9IHBvb2wuZmlsdGVyKGV4ID0+XHJcbiAgICBrZXlzLnNvbWUoayA9PlxyXG4gICAgICBleC5tb3ZlbWVudC5pbmNsdWRlcyhrKSB8fFxyXG4gICAgICBleC5wcmltYXJ5LmluY2x1ZGVzKGspXHJcbiAgICApXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgcGlja2VkID0gcGlja1dlaWdodGVkKFxyXG4gICAgcmFuZCxcclxuICAgIGNhbmRpZGF0ZXMsXHJcbiAgICBleCA9PiBzY29yZUZvclByb2ZpbGUoZXgsIHByb2ZpbGUpICogKDAuODUgKyByYW5kKCkqMC4zKSxcclxuICAgIHRhcmdldENvdW50XHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIHBpY2tlZC5tYXAoZXggPT4gKHtcclxuICAgIGlkOiBleC5pZCxcclxuICAgIG5hbWU6IGV4Lm5hbWUsXHJcbiAgICBlcXVpcG1lbnQ6IGV4LmVxdWlwbWVudCxcclxuICAgIHByaW1hcnk6IGV4LnByaW1hcnksXHJcbiAgICBtb3ZlbWVudDogZXgubW92ZW1lbnQsXHJcbiAgICBzZXRzOiAzLFxyXG4gICAgcmVwczogOCArIE1hdGguZmxvb3IocmFuZCgpKjQpLFxyXG4gICAgaW50ZW5zaXR5X3BjdDogNjUgKyBNYXRoLmZsb29yKHJhbmQoKSoxMCksXHJcbiAgICByZXN0X3NlYzogNzUsXHJcbiAgICByaXI6IDEsXHJcbiAgICBub3RlczogXCJcIlxyXG4gIH0pKTtcclxufVxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICBNQUlOIFBMQU4gQ1JFQVRPUlxyXG4gICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQbGFuKHByb2ZpbGUgPSB7fSwgb3B0cyA9IHt9KSB7XHJcbiAgY29uc3QgZGF5cyA9IE51bWJlcihwcm9maWxlLmRheXNQZXJXZWVrKSB8fCAzO1xyXG4gIGNvbnN0IHRpbWUgPSBOdW1iZXIocHJvZmlsZS50aW1lUGVyU2Vzc2lvbikgfHwgNDA7XHJcbiAgY29uc3Qgc2VlZCA9IHByb2ZpbGUuc2VlZCB8fCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMWU5KTtcclxuICBjb25zdCByYW5kID0gcmFuZFNlZWRlZChzZWVkKTtcclxuXHJcbiAgLy8gZXF1aXBtZW50IG5vcm1hbGl6YXRpb25cclxuICBjb25zdCBlcSA9IG5ldyBTZXQocHJvZmlsZS5lcXVpcG1lbnQgfHwgWydib2R5d2VpZ2h0J10pO1xyXG4gIGNvbnN0IGVxRmxhZ3MgPSBbXTtcclxuICBpZiAoZXEuaGFzKCdiYXJiZWxsJykgfHwgZXEuaGFzKCdtYWNoaW5lJykgfHwgZXEuaGFzKCdneW0nKSkgZXFGbGFncy5wdXNoKCdiYXJiZWxsJywnbWFjaGluZScpO1xyXG4gIGlmIChlcS5oYXMoJ2R1bWJiZWxsJykgfHwgZXEuaGFzKCdiYW5kcycpIHx8IGVxLmhhcygnaG9tZScpKSBlcUZsYWdzLnB1c2goJ2R1bWJiZWxsJyk7XHJcbiAgaWYgKGVxLmhhcygnYm9keXdlaWdodCcpKSBlcUZsYWdzLnB1c2goJ2JvZHl3ZWlnaHQnKTtcclxuXHJcbiAgY29uc3QgcG9vbCA9IGZpbHRlckJ5RXF1aXBtZW50KEVYRVJDSVNFUywgZXFGbGFncyk7XHJcblxyXG4gIGNvbnN0IHNwbGl0ID0gcHJvZmlsZS5leHBlcmllbmNlID09PSAnYmVnaW5uZXInXHJcbiAgICA/IEFycmF5KGRheXMpLmZpbGwoXCJGdWxsXCIpXHJcbiAgICA6IGRheXMgPT09IDNcclxuICAgICAgPyBbXCJQdXNoXCIsXCJQdWxsXCIsXCJMZWdzXCJdXHJcbiAgICAgIDogQXJyYXkoZGF5cykuZmlsbChcIkZ1bGxcIik7XHJcblxyXG4gIGNvbnN0IHNlc3Npb25zID0gc3BsaXQubWFwKCh0eXBlLCBpZHgpID0+ICh7XHJcbiAgICBkYXk6IGBEYXkgJHtpZHgrMX0gLSAke3R5cGV9YCxcclxuICAgIHNlc3Npb25UeXBlOiB0eXBlLFxyXG4gICAgZXhlcmNpc2VzOiBidWlsZFNlc3Npb24ocHJvZmlsZSwgcG9vbCwgdHlwZSwgdGltZSwgcmFuZClcclxuICB9KSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBnZW5lcmF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgcHJvZmlsZTogeyAuLi5wcm9maWxlLCBzZWVkIH0sXHJcbiAgICBzZXNzaW9ucyxcclxuICAgIG1ldGE6IHsgc2VlZCB9XHJcbiAgfTtcclxufVxyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICBORVc6IFNBTUUtU0VTU0lPTiBBTFRFUk5BVElWRVNcclxuICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWx0ZXJuYXRpdmVzKGJhc2VFeGVyY2lzZU5hbWUsIHBvb2w9XCJneW1cIiwgY291bnQ9NSwgcHJvZmlsZT17fSkge1xyXG4gIGlmICghYmFzZUV4ZXJjaXNlTmFtZSkgcmV0dXJuIFtdO1xyXG5cclxuICAvLyAxLiBsb2NhdGUgYmFzZSBleGVyY2lzZSAoY2FzZS1pbnNlbnNpdGl2ZSlcclxuICBsZXQgYmFzZSA9IEVYRVJDSVNFUy5maW5kKFxyXG4gICAgZXggPT5cclxuICAgICAgZXgubmFtZS50b0xvd2VyQ2FzZSgpID09PSBiYXNlRXhlcmNpc2VOYW1lLnRvTG93ZXJDYXNlKCkgfHxcclxuICAgICAgZXguaWQudG9Mb3dlckNhc2UoKSA9PT0gYmFzZUV4ZXJjaXNlTmFtZS50b0xvd2VyQ2FzZSgpXHJcbiAgKTtcclxuXHJcbiAgLy8gZmFsbGJhY2sgcGFydGlhbCBtYXRjaFxyXG4gIGlmICghYmFzZSkge1xyXG4gICAgY29uc3QgdG9rZW4gPSBiYXNlRXhlcmNpc2VOYW1lLnNwbGl0KFwiIFwiKVswXS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgY29uc3QgZmFsbGJhY2sgPSBFWEVSQ0lTRVMuZmluZChleCA9PiBleC5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModG9rZW4pKTtcclxuICAgIGlmIChmYWxsYmFjaykgYmFzZSA9IGZhbGxiYWNrO1xyXG4gIH1cclxuXHJcbiAgaWYgKCFiYXNlKSByZXR1cm4gW107XHJcblxyXG4gIC8vIDIuIGVxdWlwbWVudCBwb29sIOKGkiBhbGxvd2VkIGVxdWlwbWVudFxyXG4gIGNvbnN0IHBvb2xNYXAgPSB7XHJcbiAgICBneW06IFsnYmFyYmVsbCcsJ21hY2hpbmUnXSxcclxuICAgIGR1bWJiZWxsOiBbJ2R1bWJiZWxsJ10sXHJcbiAgICBib2R5OiBbJ2JvZHl3ZWlnaHQnXVxyXG4gIH07XHJcbiAgY29uc3QgYWxsb3dlZCA9IHBvb2xNYXBbcG9vbF0gfHwgWydiYXJiZWxsJywnZHVtYmJlbGwnLCdib2R5d2VpZ2h0J107XHJcblxyXG4gIC8vIDMuIGZpbHRlciBieTogc2FtZSBtb3ZlbWVudCBPUiBzYW1lIHByaW1hcnkgbXVzY2xlXHJcbiAgY29uc3QgY2FuZGlkYXRlcyA9IEVYRVJDSVNFUy5maWx0ZXIoZXggPT4ge1xyXG4gICAgaWYgKGV4LmlkID09PSBiYXNlLmlkKSByZXR1cm4gZmFsc2U7XHJcbiAgICBpZiAoIWV4LmVxdWlwbWVudC5zb21lKGUgPT4gYWxsb3dlZC5pbmNsdWRlcyhlKSkpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICBjb25zdCBzYW1lTW92ZSA9IGV4Lm1vdmVtZW50ID09PSBiYXNlLm1vdmVtZW50O1xyXG4gICAgY29uc3Qgc2FtZVByaW0gPSBleC5wcmltYXJ5ID09PSBiYXNlLnByaW1hcnk7XHJcblxyXG4gICAgcmV0dXJuIHNhbWVNb3ZlIHx8IHNhbWVQcmltIHx8IGV4Lm1vdmVtZW50ID09PSAnaXNvbGF0aW9uJztcclxuICB9KTtcclxuXHJcbiAgLy8gNC4gc2NvcmluZyBmb3IgcGlja2luZ1xyXG4gIGNvbnN0IHJhbmQgPSByYW5kU2VlZGVkKHByb2ZpbGUuc2VlZCB8fCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMWU5KSk7XHJcbiAgY29uc3Qgc2NvcmVGbiA9IGV4ID0+IHtcclxuICAgIGxldCBzID0gMDtcclxuICAgIGlmIChleC5tb3ZlbWVudCA9PT0gYmFzZS5tb3ZlbWVudCkgcyArPSAyLjA7XHJcbiAgICBpZiAoZXgucHJpbWFyeSA9PT0gYmFzZS5wcmltYXJ5KSBzICs9IDEuMjtcclxuICAgIHMgKz0gc2NvcmVGb3JQcm9maWxlKGV4LCBwcm9maWxlKTtcclxuICAgIHJldHVybiBzICogKDAuODUgKyByYW5kKCkqMC4zKTtcclxuICB9O1xyXG5cclxuICAvLyBwaWNrIHdlaWdodGVkIHRvcC1OXHJcbiAgY29uc3QgcGlja2VkID0gcGlja1dlaWdodGVkKHJhbmQsIGNhbmRpZGF0ZXMsIHNjb3JlRm4sIGNvdW50KTtcclxuXHJcbiAgLy8gNS4gcmV0dXJuIFVJLXJlYWR5IG9iamVjdHNcclxuICByZXR1cm4gcGlja2VkLm1hcChwID0+ICh7XHJcbiAgICBpZDogcC5pZCxcclxuICAgIG5hbWU6IHAubmFtZSxcclxuICAgIGVxdWlwbWVudDogcC5lcXVpcG1lbnQsXHJcbiAgICBwcmltYXJ5OiBwLnByaW1hcnksXHJcbiAgICBtb3ZlbWVudDogcC5tb3ZlbWVudCxcclxuICAgIG5vdGVzOiBcIlwiXHJcbiAgfSkpO1xyXG59XHJcblxyXG4vKiBkZWZhdWx0IGV4cG9ydCAqL1xyXG5leHBvcnQgZGVmYXVsdCB7IGNyZWF0ZVBsYW4sIGdldEFsdGVybmF0aXZlcyB9O1xyXG4iXSwibmFtZXMiOlsicmFuZFNlZWRlZCIsInNlZWQiLCJ0IiwiciIsIk1hdGgiLCJpbXVsIiwiRVhFUkNJU0VTIiwiaWQiLCJuYW1lIiwicHJpbWFyeSIsIm1vdmVtZW50IiwiZXF1aXBtZW50IiwiZ29hbHMiLCJzdHJlbmd0aCIsImh5cGVydHJvcGh5IiwiZmF0IiwiZW5kdXJhbmNlIiwiZXhwZXJpZW5jZSIsImZpbHRlckJ5RXF1aXBtZW50IiwiZXhMaXN0IiwiZmxhZ3MiLCJlcVNldCIsIlNldCIsImZpbHRlciIsImV4Iiwic29tZSIsImUiLCJoYXMiLCJwaWNrV2VpZ2h0ZWQiLCJyYW5kIiwiYXJyIiwic2NvcmVGbiIsImNvdW50Iiwib3V0IiwicG9vbCIsImxlbmd0aCIsInNjb3JlcyIsIm1hcCIsIngiLCJtYXgiLCJ0b3RhbCIsInJlZHVjZSIsImEiLCJiIiwiaWR4IiwiYWNjIiwiaSIsInB1c2giLCJzcGxpY2UiLCJzY29yZUZvclByb2ZpbGUiLCJwcm9maWxlIiwiZyIsImdvYWwiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiYnVpbGRTZXNzaW9uIiwic2Vzc2lvblR5cGUiLCJ0aW1lIiwidGFyZ2V0Q291bnQiLCJ0eXBlTWFwIiwicHVsbCIsImxlZ3MiLCJmdWxsIiwia2V5cyIsImNhbmRpZGF0ZXMiLCJrIiwicGlja2VkIiwic2V0cyIsInJlcHMiLCJmbG9vciIsImludGVuc2l0eV9wY3QiLCJyZXN0X3NlYyIsInJpciIsIm5vdGVzIiwiY3JlYXRlUGxhbiIsIm9wdHMiLCJkYXlzIiwiTnVtYmVyIiwiZGF5c1BlcldlZWsiLCJ0aW1lUGVyU2Vzc2lvbiIsInJhbmRvbSIsImVxIiwiZXFGbGFncyIsInNwbGl0IiwiQXJyYXkiLCJmaWxsIiwic2Vzc2lvbnMiLCJ0eXBlIiwiZGF5IiwiZXhlcmNpc2VzIiwiZ2VuZXJhdGVkQXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJtZXRhIiwiZ2V0QWx0ZXJuYXRpdmVzIiwiYmFzZUV4ZXJjaXNlTmFtZSIsImJhc2UiLCJmaW5kIiwidG9rZW4iLCJmYWxsYmFjayIsInBvb2xNYXAiLCJneW0iLCJkdW1iYmVsbCIsImJvZHkiLCJhbGxvd2VkIiwic2FtZU1vdmUiLCJzYW1lUHJpbSIsInMiLCJwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/aiExerciseSelector.js\n");

/***/ }),

/***/ "(api)/./lib/planGenerator.js":
/*!******************************!*\
  !*** ./lib/planGenerator.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   generateProfessionalPlan: () => (/* binding */ generateProfessionalPlan),\n/* harmony export */   getAlternatives: () => (/* binding */ getAlternatives)\n/* harmony export */ });\n/* harmony import */ var _aiExerciseSelector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./aiExerciseSelector */ \"(api)/./lib/aiExerciseSelector.js\");\n// lib/planGenerator.js\n\n/**\n * generateProfessionalPlan(profile)\n * Wrapper for ai.createPlan\n */ function generateProfessionalPlan(profile = {}) {\n    const plan = _aiExerciseSelector__WEBPACK_IMPORTED_MODULE_0__.createPlan(profile);\n    plan.profile = plan.profile || profile;\n    return plan;\n}\n/**\n * getAlternatives(name, pool, count, profile)\n * Re-export for compatibility with existing UI import paths\n */ function getAlternatives(name, pool = \"gym\", count = 5, profile = {}) {\n    return _aiExerciseSelector__WEBPACK_IMPORTED_MODULE_0__.getAlternatives(name, pool, count, profile);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (generateProfessionalPlan);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcGxhbkdlbmVyYXRvci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsdUJBQXVCO0FBQ29CO0FBRTNDOzs7Q0FHQyxHQUNNLFNBQVNDLHlCQUF5QkMsVUFBVSxDQUFDLENBQUM7SUFDbkQsTUFBTUMsT0FBT0gsMkRBQWEsQ0FBQ0U7SUFDM0JDLEtBQUtELE9BQU8sR0FBR0MsS0FBS0QsT0FBTyxJQUFJQTtJQUMvQixPQUFPQztBQUNUO0FBRUE7OztDQUdDLEdBQ00sU0FBU0UsZ0JBQWdCQyxJQUFJLEVBQUVDLE9BQU8sS0FBSyxFQUFFQyxRQUFRLENBQUMsRUFBRU4sVUFBVSxDQUFDLENBQUM7SUFDekUsT0FBT0YsZ0VBQWtCLENBQUNNLE1BQU1DLE1BQU1DLE9BQU9OO0FBQy9DO0FBRUEsaUVBQWVELHdCQUF3QkEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2ZpdHRyYWNrLXByby8uL2xpYi9wbGFuR2VuZXJhdG9yLmpzPzhlM2YiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL3BsYW5HZW5lcmF0b3IuanNcbmltcG9ydCAqIGFzIGFpIGZyb20gJy4vYWlFeGVyY2lzZVNlbGVjdG9yJztcblxuLyoqXG4gKiBnZW5lcmF0ZVByb2Zlc3Npb25hbFBsYW4ocHJvZmlsZSlcbiAqIFdyYXBwZXIgZm9yIGFpLmNyZWF0ZVBsYW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlUHJvZmVzc2lvbmFsUGxhbihwcm9maWxlID0ge30pIHtcbiAgY29uc3QgcGxhbiA9IGFpLmNyZWF0ZVBsYW4ocHJvZmlsZSk7XG4gIHBsYW4ucHJvZmlsZSA9IHBsYW4ucHJvZmlsZSB8fCBwcm9maWxlO1xuICByZXR1cm4gcGxhbjtcbn1cblxuLyoqXG4gKiBnZXRBbHRlcm5hdGl2ZXMobmFtZSwgcG9vbCwgY291bnQsIHByb2ZpbGUpXG4gKiBSZS1leHBvcnQgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBleGlzdGluZyBVSSBpbXBvcnQgcGF0aHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFsdGVybmF0aXZlcyhuYW1lLCBwb29sID0gJ2d5bScsIGNvdW50ID0gNSwgcHJvZmlsZSA9IHt9KSB7XG4gIHJldHVybiBhaS5nZXRBbHRlcm5hdGl2ZXMobmFtZSwgcG9vbCwgY291bnQsIHByb2ZpbGUpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBnZW5lcmF0ZVByb2Zlc3Npb25hbFBsYW47XG4iXSwibmFtZXMiOlsiYWkiLCJnZW5lcmF0ZVByb2Zlc3Npb25hbFBsYW4iLCJwcm9maWxlIiwicGxhbiIsImNyZWF0ZVBsYW4iLCJnZXRBbHRlcm5hdGl2ZXMiLCJuYW1lIiwicG9vbCIsImNvdW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/planGenerator.js\n");

/***/ }),

/***/ "(api)/./pages/api/plan.js":
/*!***************************!*\
  !*** ./pages/api/plan.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_planGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/planGenerator */ \"(api)/./lib/planGenerator.js\");\n// pages/api/plan.js\n\nlet savedPlan = null;\nasync function handler(req, res) {\n    if (req.method === \"POST\") {\n        const profile = req.body || {};\n        const plan = (0,_lib_planGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(profile);\n        // If GPT key exists → refine the plan automatically\n        if (process.env.OPENAI_API_KEY) {\n            try {\n                const refineUrl = process.env.VERCEL_URL ? `https://${process.env.VERCEL_URL}/api/ai-refine-plan` : \"http://localhost:3000/api/ai-refine-plan\";\n                const refineRes = await fetch(refineUrl, {\n                    method: \"POST\",\n                    headers: {\n                        \"content-type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        plan,\n                        profile\n                    })\n                });\n                if (refineRes.ok) {\n                    const json = await refineRes.json();\n                    const refined = json.refined || plan;\n                    savedPlan = refined;\n                    return res.status(200).json(refined);\n                }\n            } catch (err) {\n                console.warn(\"AI refine failed:\", err.message);\n            }\n        }\n        // fallback to raw plan\n        savedPlan = plan;\n        return res.status(200).json(plan);\n    } else {\n        if (!savedPlan) {\n            savedPlan = (0,_lib_planGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n                goal: \"General Fitness\",\n                experience: \"beginner\",\n                daysPerWeek: 3,\n                timePerSession: 40,\n                equipment: [\n                    \"bodyweight\"\n                ]\n            });\n        }\n        return res.status(200).json(savedPlan);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcGxhbi5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLG9CQUFvQjtBQUMwQztBQUU5RCxJQUFJQyxZQUFZO0FBRUQsZUFBZUMsUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzVDLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRO1FBQ3pCLE1BQU1DLFVBQVVILElBQUlJLElBQUksSUFBSSxDQUFDO1FBQzdCLE1BQU1DLE9BQU9SLDhEQUF3QkEsQ0FBQ007UUFFdEMsb0RBQW9EO1FBQ3BELElBQUlHLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYyxFQUFFO1lBQzlCLElBQUk7Z0JBQ0YsTUFBTUMsWUFBWUgsUUFBUUMsR0FBRyxDQUFDRyxVQUFVLEdBQ3BDLENBQUMsUUFBUSxFQUFFSixRQUFRQyxHQUFHLENBQUNHLFVBQVUsQ0FBQyxtQkFBbUIsQ0FBQyxHQUN0RDtnQkFFSixNQUFNQyxZQUFZLE1BQU1DLE1BQU1ILFdBQVc7b0JBQ3ZDUCxRQUFRO29CQUNSVyxTQUFTO3dCQUFFLGdCQUFnQjtvQkFBbUI7b0JBQzlDVCxNQUFNVSxLQUFLQyxTQUFTLENBQUM7d0JBQUVWO3dCQUFNRjtvQkFBUTtnQkFDdkM7Z0JBRUEsSUFBSVEsVUFBVUssRUFBRSxFQUFFO29CQUNoQixNQUFNQyxPQUFPLE1BQU1OLFVBQVVNLElBQUk7b0JBQ2pDLE1BQU1DLFVBQVVELEtBQUtDLE9BQU8sSUFBSWI7b0JBQ2hDUCxZQUFZb0I7b0JBQ1osT0FBT2pCLElBQUlrQixNQUFNLENBQUMsS0FBS0YsSUFBSSxDQUFDQztnQkFDOUI7WUFDRixFQUFFLE9BQU9FLEtBQUs7Z0JBQ1pDLFFBQVFDLElBQUksQ0FBQyxxQkFBcUJGLElBQUlHLE9BQU87WUFDL0M7UUFDRjtRQUVBLHVCQUF1QjtRQUN2QnpCLFlBQVlPO1FBQ1osT0FBT0osSUFBSWtCLE1BQU0sQ0FBQyxLQUFLRixJQUFJLENBQUNaO0lBRTlCLE9BQU87UUFDTCxJQUFJLENBQUNQLFdBQVc7WUFDZEEsWUFBWUQsOERBQXdCQSxDQUFDO2dCQUNuQzJCLE1BQU07Z0JBQ05DLFlBQVk7Z0JBQ1pDLGFBQWE7Z0JBQ2JDLGdCQUFnQjtnQkFDaEJDLFdBQVc7b0JBQUM7aUJBQWE7WUFDM0I7UUFDRjtRQUNBLE9BQU8zQixJQUFJa0IsTUFBTSxDQUFDLEtBQUtGLElBQUksQ0FBQ25CO0lBQzlCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9maXR0cmFjay1wcm8vLi9wYWdlcy9hcGkvcGxhbi5qcz9lZDU5Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHBhZ2VzL2FwaS9wbGFuLmpzXG5pbXBvcnQgZ2VuZXJhdGVQcm9mZXNzaW9uYWxQbGFuIGZyb20gJy4uLy4uL2xpYi9wbGFuR2VuZXJhdG9yJ1xuXG5sZXQgc2F2ZWRQbGFuID0gbnVsbFxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICBjb25zdCBwcm9maWxlID0gcmVxLmJvZHkgfHwge31cbiAgICBjb25zdCBwbGFuID0gZ2VuZXJhdGVQcm9mZXNzaW9uYWxQbGFuKHByb2ZpbGUpXG5cbiAgICAvLyBJZiBHUFQga2V5IGV4aXN0cyDihpIgcmVmaW5lIHRoZSBwbGFuIGF1dG9tYXRpY2FsbHlcbiAgICBpZiAocHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlZmluZVVybCA9IHByb2Nlc3MuZW52LlZFUkNFTF9VUkxcbiAgICAgICAgICA/IGBodHRwczovLyR7cHJvY2Vzcy5lbnYuVkVSQ0VMX1VSTH0vYXBpL2FpLXJlZmluZS1wbGFuYFxuICAgICAgICAgIDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYWktcmVmaW5lLXBsYW4nXG5cbiAgICAgICAgY29uc3QgcmVmaW5lUmVzID0gYXdhaXQgZmV0Y2gocmVmaW5lVXJsLCB7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczogeyAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwbGFuLCBwcm9maWxlIH0pXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKHJlZmluZVJlcy5vaykge1xuICAgICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZWZpbmVSZXMuanNvbigpXG4gICAgICAgICAgY29uc3QgcmVmaW5lZCA9IGpzb24ucmVmaW5lZCB8fCBwbGFuXG4gICAgICAgICAgc2F2ZWRQbGFuID0gcmVmaW5lZFxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihyZWZpbmVkKVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiQUkgcmVmaW5lIGZhaWxlZDpcIiwgZXJyLm1lc3NhZ2UpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gZmFsbGJhY2sgdG8gcmF3IHBsYW5cbiAgICBzYXZlZFBsYW4gPSBwbGFuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHBsYW4pXG5cbiAgfSBlbHNlIHtcbiAgICBpZiAoIXNhdmVkUGxhbikge1xuICAgICAgc2F2ZWRQbGFuID0gZ2VuZXJhdGVQcm9mZXNzaW9uYWxQbGFuKHtcbiAgICAgICAgZ29hbDogJ0dlbmVyYWwgRml0bmVzcycsXG4gICAgICAgIGV4cGVyaWVuY2U6ICdiZWdpbm5lcicsXG4gICAgICAgIGRheXNQZXJXZWVrOiAzLFxuICAgICAgICB0aW1lUGVyU2Vzc2lvbjogNDAsXG4gICAgICAgIGVxdWlwbWVudDogWydib2R5d2VpZ2h0J11cbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihzYXZlZFBsYW4pXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJnZW5lcmF0ZVByb2Zlc3Npb25hbFBsYW4iLCJzYXZlZFBsYW4iLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwicHJvZmlsZSIsImJvZHkiLCJwbGFuIiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwicmVmaW5lVXJsIiwiVkVSQ0VMX1VSTCIsInJlZmluZVJlcyIsImZldGNoIiwiaGVhZGVycyIsIkpTT04iLCJzdHJpbmdpZnkiLCJvayIsImpzb24iLCJyZWZpbmVkIiwic3RhdHVzIiwiZXJyIiwiY29uc29sZSIsIndhcm4iLCJtZXNzYWdlIiwiZ29hbCIsImV4cGVyaWVuY2UiLCJkYXlzUGVyV2VlayIsInRpbWVQZXJTZXNzaW9uIiwiZXF1aXBtZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/plan.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fplan&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cplan.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();